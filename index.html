<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>花札 スコア記録</title>
    <style>
        body {
            background-image: url('ベージュ 和風 和柄の背景 インスタグラムストーリー.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: auto;
        }

        .container {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .btn {
            background-color: #d4a373;
            color: white;
            padding: 10px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            width: 60px;
        }

        .btn.transparent {
            opacity: 0.5;
        }

        .btn.solid {
            opacity: 1;
        }

        .score-display {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .keypad .btn {
            width: 60px;
            height: 60px;
            font-size: 24px;
        }

        .current-month {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .end-button {
            margin-top: 20px;
            background-color: #d4a373;
            color: white;
            font-size: 18px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="scorekeeper" class="container">
        <div class="score-display">花札<span id="months-count">12</span>ヶ月　現在 <span id="total-score">0</span>点</div>
        <div id="month-buttons">
            <!-- 月ボタンがここに生成されます -->
        </div>
        <div class="current-month" id="current-month-display">2月 10点</div>
        <div class="keypad" id="keypad">
            <!-- 数字キーパッド -->
            <button class="btn">1</button>
            <button class="btn">2</button>
            <button class="btn">3</button>
            <button class="btn">4</button>
            <button class="btn">5</button>
            <button class="btn">6</button>
            <button class="btn">7</button>
            <button class="btn">8</button>
            <button class="btn">9</button>
            <button class="btn">0</button>
            <button class="btn">×</button>
            <button class="btn">✓</button>
        </div>
        <button class="end-button">おわり</button>
    </div>

    <script>
        let totalScore = 0;
        const months = 12;  // 6ヶ月または12ヶ月
        let scores = Array(months).fill(null);  // 各月のスコア
        let currentMonth = null;
        let currentScore = "";

        const monthButtonsContainer = document.getElementById('month-buttons');
        const currentMonthDisplay = document.getElementById('current-month-display');
        const totalScoreDisplay = document.getElementById('total-score');

        // 月ボタンを生成
        function createMonthButtons() {
            for (let i = 1; i <= months; i++) {
                const button = document.createElement('button');
                button.classList.add('btn');
                button.textContent = `${i}月`;

                // スコアが入力済みかどうかで透明度を変更
                if (scores[i - 1] !== null) {
                    button.classList.add('solid');
                } else {
                    button.classList.add('transparent');
                }

                button.addEventListener('click', function() {
                    currentMonth = i;
                    currentScore = scores[i - 1] !== null ? scores[i - 1].toString() : "";
                    updateCurrentMonthDisplay();
                });

                monthButtonsContainer.appendChild(button);
            }
        }

        // 現在の月の表示を更新
        function updateCurrentMonthDisplay() {
            currentMonthDisplay.textContent = `${currentMonth}月 ${currentScore || 0}点`;
        }

        // キーパッドの動作
        document.querySelectorAll('.keypad .btn').forEach(button => {
            button.addEventListener('click', function() {
                const value = button.textContent;

                if (value === '×') {
                    currentScore = "";
                } else if (value === '✓') {
                    // スコア確定
                    if (currentMonth !== null && currentScore !== "") {
                        scores[currentMonth - 1] = parseInt(currentScore, 10);
                        totalScore = scores.reduce((sum, score) => sum + (score || 0), 0);
                        totalScoreDisplay.textContent = totalScore;

                        // ボタンの透明度を更新
                        const monthButton = monthButtonsContainer.children[currentMonth - 1];
                        monthButton.classList.remove('transparent');
                        monthButton.classList.add('solid');
                    }
                } else {
                    // 数字を入力
                    currentScore += value;
                }

                updateCurrentMonthDisplay();
            });
        });

        createMonthButtons();
    </script>
</body>
</html>
